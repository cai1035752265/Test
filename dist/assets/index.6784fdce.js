var Z=Object.defineProperty,X=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var z=(o,s,l)=>s in o?Z(o,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):o[s]=l,h=(o,s)=>{for(var l in s||(s={}))ee.call(s,l)&&z(o,l,s[l]);if(Y)for(var l of Y(s))te.call(s,l)&&z(o,l,s[l]);return o},C=(o,s)=>X(o,K(s));import{n as u,r as oe,O as se,a as ne,c as ae,w as le,v as E,aS as ie,a6 as S,ab as c,o as _,h as H,i as p,x as J,y as x,j as M,l as U,z as g,B as m,t as q,G as re,ae as ce,a_ as L,cH as N,cI as ue,cJ as pe,cK as G}from"./index.27013bb4.js";import de from"./operateModal.5f5ecc38.js";import{D as me}from"./DeleteOutlined.b1b0803e.js";import{E as fe}from"./EditOutlined.560e9cce.js";import{P as ke}from"./PlusOutlined.4e9172fe.js";var Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"},ge=Oe;function W(o){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?Object(arguments[s]):{},k=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(k=k.concat(Object.getOwnPropertySymbols(l).filter(function(e){return Object.getOwnPropertyDescriptor(l,e).enumerable}))),k.forEach(function(e){he(o,e,l[e])})}return o}function he(o,s,l){return s in o?Object.defineProperty(o,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[s]=l,o}var V=function(s,l){var k=W({},s,l.attrs);return u(oe,W({},k,{icon:ge}),null)};V.displayName="QuestionCircleOutlined";V.inheritAttrs=!1;var ye=V;const De=ne({components:{DeleteOutlined:me,EditOutlined:fe,PlusOutlined:ke,QuestionCircleOutlined:ye,OperateModal:de,VNodes:(o,{attrs:s})=>s.vnodes},setup(){const{t:o}=ae(),s=(t,{attrs:n})=>n.vnodes,l=window.localStorage.getItem("datesOptions"),e=le({datepickerFocus:!1,pickerDateOpen:!1,timepickerFocus:!1,pickerTimeOpen:!1,pickerType:0,selectFocus:!1,selectOpen:!1,searchValue:"",formData:h({},{type:1,pickerDate:[],selectDate:[]}),datesOptions:l?JSON.parse(l):[],filterDatesOptions:l?JSON.parse(l):[],modalState:{editName:"",editIndex:0,type:"add",visible:!1}}),F=E(),y=E(),T=E(),D=E(),b=ie(),w=(t,n,i)=>{var f;e.pickerType;const a=e.pickerType===0?"-":":",r=e.pickerType===0?"YYYY-MM-DD":"HH:mm:ss";if(G(n.join(a),r,!0).isValid()){t.value=n.join(a),t.value;const O=(f=e.formData.pickerDate)!=null?f:[null,null];O[i]=G(n.join(a),r),e.formData.pickerDate=O,i&&(e[e.pickerType?"pickerTimeOpen":"pickerDateOpen"]=!1)}},A=(t,n)=>{const i=t.getElementsByClassName("ant-picker-input")[1].childNodes[0];if(n.value,i.value,e.datepickerFocus){if(n.value.length===(e.pickerType===0?8:6)){const a=n.value,r=e.pickerType===0?[a.slice(0,4),a.slice(4,6),a.slice(6,8)]:[a.slice(0,2),a.slice(2,4),a.slice(4,6)];w(n,r,0)}if(i.value.length===(e.pickerType===0?8:6)){const a=i.value,r=e.pickerType===0?[a.slice(0,4),a.slice(4,6),a.slice(6,8)]:[a.slice(0,2),a.slice(2,4),a.slice(4,6)];w(i,r,1)}}};document.addEventListener("keyup",t=>{if(b.currentRoute.value.path!=="/test/custom_date_picker")return;const n=document.getElementsByClassName("custom_date_picker")[0],i=n.getElementsByClassName("ant-picker-input")[0].childNodes[0],a=document.getElementsByClassName("ant-select-selection-search-input")[0];if(t.key==="Control"){const r=e.formData.type===0&&e.datepickerFocus&&!e.pickerType,d=e.formData.type===0&&e.timepickerFocus&&e.pickerType;(r||d)&&(e.datepickerFocus=!!e.pickerType,e.timepickerFocus=!e.pickerType,e.pickerType=+!e.pickerType,e.formData.pickerDate=[],S(()=>{var O;(O=(e.pickerType?y:F).value)==null||O.focus()}))}else{const r=e.pickerType===0&&e.datepickerFocus||e.pickerType===1&&e.timepickerFocus;if(e.formData.type===0&&r&&A(n,i),e.formData.type===0&&/^[a-zA-Z]{1}$/.test(t.key)&&i.value.length===1&&r){e.formData=C(h({},e.formData),{type:1});const d=t.key;S(()=>{var f;(f=T.value)==null||f.focus(),e.searchValue=d,e.filterDatesOptions=e.datesOptions.filter(O=>O.label.indexOf(e.searchValue)!==-1)})}e.formData.type===1&&e.selectFocus&&/^\d{1}$/.test(t.key)&&a.value.length===1&&(e.formData=C(h({},e.formData),{type:0}),S(()=>{var f;(f=(e.pickerType?y:F).value)==null||f.focus(),S(()=>{i.value=t.key})}))}});const B=(t,n)=>n.label.indexOf(t)!==-1,v=(t,n,i=!1)=>{var a,r;if(t==="selectSearch")/^\d{1}$/.test(n)||(e.searchValue=n,e.filterDatesOptions=e.datesOptions.filter(d=>d.label.indexOf(e.searchValue)!==-1)),e.searchValue;else if(t==="select")e.formData=C(h({},e.formData),{selectDate:n}),e.filterDatesOptions=e.datesOptions,e.searchValue="",e.formData.selectDate,N.success(n);else{e.formData=C(h({},e.formData),{pickerDate:n}),i&&(e[e.pickerType?"pickerTimeOpen":"pickerDateOpen"]=!1);const d=e.pickerType?"HH:mm:ss":"YYYY-MM-DD";n&&N.success(JSON.stringify([(a=n[0])==null?void 0:a.format(d),(r=n[1])==null?void 0:r.format(d)]))}};return{t:o,menu:s,state:e,addModalShow:()=>{D.value.addItem()},editModalShow:(t,n)=>{D.value.editItem(t,n)},deleteItem:t=>{ue.confirm({title:o("routes.test.are_sure_delete")+"?",icon:u(pe),onOk(){e.datesOptions=[...e.datesOptions.slice(0,t),...e.datesOptions.slice(t+1)],v("selectSearch",e.searchValue),window.localStorage.setItem("datesOptions",JSON.stringify(e.datesOptions)),N.success(o("routes.test.delete")+o("routes.test.succeed"))},onCancel(){}})},handleChange:v,onFocusChange:(t,n,i,a)=>{e[n]=a,e[i]=a},datepickerRef:F,timepickerRef:y,modalRef:D,selectRef:T,openChange:t=>{e[e.pickerType?"pickerTimeOpen":"pickerDateOpen"]=t},onFilter:B,modalConfirm:t=>{e.datesOptions=t,v("selectSearch",e.searchValue)}}}}),ve={class:"custom_date_picker"},Ce={class:"date-box"},_e={class:"date-box"},Fe=m(" Add item "),Te=m(" \u4E0B\u62C9\u6846"),we=p("span",{class:"warn-color"},"\u7B2C\u4E00\u4E2A",-1),Ee=m("\u8F93\u5165"),Se=p("span",{class:"warn-color"},"\u6570\u5B57",-1),be=m("\u5C06\u5207\u6362\u6210\xA0\xA0\u8303\u56F4\u65E5\u671F\u9009\u62E9\xA0\xA0; "),Ae=p("br",null,null,-1),Be=m(" \u6B64\u65F6\u82E5\u662F\u805A\u7126\u5E76\u6309\u4E0B"),Me=p("span",{class:"warn-color"},"Ctrl",-1),Ne=m("\u5219\u662F\xA0\xA0\u65E5\u671F\u9009\u62E9\xA0\xA0\u548C\xA0\xA0\u65F6\u95F4\u9009\u62E9\xA0\xA0\u4E4B\u95F4\u7684\u5207\u6362; "),Ve=p("br",null,null,-1),$e=m(" \u65E5\u671F\u9009\u62E9"),Re=p("span",{class:"warn-color"},"\u7B2C\u4E00\u4E2A",-1),Ie=m("\u82E5\u662F\u8F93\u5165"),je=p("span",{class:"warn-color"},"\u5B57\u6BCD",-1),Qe=m("\u5219\u4F1A\u5207\u6362\u56DE\xA0\xA0\u6A21\u677F\u7684\u9009\u62E9\u4E0B\u62C9 "),Pe={class:"date-box"};function Ye(o,s,l,k,e,F){const y=c("a-range-picker"),T=c("a-time-range-picker"),D=c("v-nodes"),b=c("a-divider"),w=c("plus-outlined"),A=c("EditOutlined"),B=c("DeleteOutlined"),v=c("a-select-option"),$=c("a-tag"),R=c("a-select"),I=c("QuestionCircleOutlined"),j=c("a-tooltip"),Q=c("a-input"),P=c("OperateModal");return _(),H("div",ve,[p("div",null,[J(p("div",Ce,[o.state.pickerType===0?(_(),M(y,{key:0,style:{width:"100%"},ref:"datepickerRef",open:o.state.pickerDateOpen,"allow-empty":[!0,!0],value:o.state.formData.pickerDate,"onUpdate:value":s[0]||(s[0]=t=>o.state.formData.pickerDate=t),onOpenChange:o.openChange,onChange:s[1]||(s[1]=t=>o.handleChange("date",t,!0)),onFocus:s[2]||(s[2]=t=>o.onFocusChange(t,"datepickerFocus","pickerDateOpen",!0)),onBlur:s[3]||(s[3]=t=>o.onFocusChange(t,"datepickerFocus","pickerDateOpen",!1))},null,8,["open","value","onOpenChange"])):U("",!0),o.state.pickerType===1?(_(),M(T,{key:1,style:{width:"100%"},ref:"timepickerRef","allow-empty":[!0,!0],showNow:"",open:o.state.pickerTimeOpen,value:o.state.formData.pickerDate,"onUpdate:value":s[4]||(s[4]=t=>o.state.formData.pickerDate=t),onOpenChange:o.openChange,onChange:s[5]||(s[5]=t=>o.handleChange("time",t,!0)),onFocus:s[6]||(s[6]=t=>o.onFocusChange(t,"datepickerFocus","pickerTimeOpen",!0)),onBlur:s[7]||(s[7]=t=>o.onFocusChange(t,"datepickerFocus","pickerTimeOpen",!1))},null,8,["open","value","onOpenChange"])):U("",!0)],512),[[x,o.state.formData.type===0]]),J(p("div",_e,[u(R,{value:o.state.formData.selectDate,"onUpdate:value":s[10]||(s[10]=t=>o.state.formData.selectDate=t),mode:"multiple",ref:"selectRef",open:o.state.selectOpen,style:{width:"100%"},placeholder:"Please select",options:o.state.filterDatesOptions,"search-value":o.state.searchValue,"filter-option":!1,onFocus:s[11]||(s[11]=t=>o.onFocusChange(t,"selectFocus","selectOpen",!0)),onBlur:s[12]||(s[12]=t=>o.onFocusChange(t,"selectFocus","selectOpen",!1)),onSearch:s[13]||(s[13]=t=>o.handleChange("selectSearch",t)),onChange:s[14]||(s[14]=t=>o.handleChange("select",t))},{dropdownRender:g(({menuNode:t})=>[u(D,{vnodes:t},null,8,["vnodes"]),u(b,{style:{margin:"4px 0"}}),p("div",{style:{padding:"4px 8px",cursor:"pointer"},onMousedown:s[8]||(s[8]=n=>n.preventDefault()),onClick:s[9]||(s[9]=n=>o.addModalShow())},[u(w),Fe],32)]),tagRender:g(({value:t,label:n,closable:i,onClose:a,option:r})=>[u($,{closable:i,onClose:a},{default:g(()=>[m(q(n),1)]),_:2},1032,["closable","onClose"])]),default:g(()=>[(_(!0),H(re,null,ce(o.state.filterDatesOptions,(t,n)=>(_(),M(v,{key:t.value,value:t.value,label:t.label},{default:g(()=>[m(q(t.label)+" ",1),u(A,{style:{position:"absolute",top:"30%",right:"58px"},type:"edit",onClick:L(i=>o.editModalShow(t,n),["stop"])},null,8,["onClick"]),u(B,{style:{position:"absolute",top:"30%",right:"34px"},type:"delete",onClick:L(i=>o.deleteItem(n),["stop"])},null,8,["onClick"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["value","open","options","search-value"])],512),[[x,o.state.formData.type===1]]),u(j,{overlayStyle:{maxWidth:"440px"}},{title:g(()=>[Te,we,Ee,Se,be,Ae,Be,Me,Ne,Ve,$e,Re,Ie,je,Qe]),default:g(()=>[u(I,{class:"question-icon"})]),_:1}),p("div",Pe,[u(Q)])]),u(P,{ref:"modalRef",onModalconfirm:o.modalConfirm,datesOptions:o.state.datesOptions},null,8,["onModalconfirm","datesOptions"])])}var Le=se(De,[["render",Ye]]);export{Le as default};
